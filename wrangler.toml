name = "2fa-worker-v2"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[assets]
directory = "./web/dist"
binding = "ASSETS"
not_found_handling = "single-page-application"

# 生产环境密码通过 secret 设置: wrangler secret put ADMIN_PASSWORD
# 生产环境 JWT 密钥通过 secret 设置（可选）: wrangler secret put JWT_SECRET
# 个人模式（显示所有账号）: wrangler secret put PUBLIC_MODE 然后输入 true

[[kv_namespaces]]
binding = "KV"
id = "dc8bb0fcbc8e4772b8dbebd7f5d560a4"

# 团队版自定义域名
[[routes]]
pattern = "2fa.skyw.eu.org"
custom_domain = true

# 个人模式环境配置
[env.personal]
name = "2fa-personal"

[env.personal.assets]
directory = "./web/dist"
binding = "ASSETS"
not_found_handling = "single-page-application"

[[env.personal.kv_namespaces]]
binding = "KV"
id = "2a1f9c03a66d402293251f40cc0f86b5"

# 个人版自定义域名
[[env.personal.routes]]
pattern = "2fa.1049131.xyz"
custom_domain = true
